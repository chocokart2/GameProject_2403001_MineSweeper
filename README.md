[Go To Main / 찾는게 여기가 아닌가요? 뒤로 가기](https://github.com/chocokart2)
# GameProject_2403001_MineSweeper
 I cloned the Minesweeper game. The project progressed rapidly, similar to a speedrun. This project started on March 21, 2024.
 지뢰찾기 게임을 순식간에 만들어보았습니다. 플레이 가능 시점으로 업데이트된 것은 제작한지 2일차부터입니다.
# 플레이 사이트
[Unity Play 사이트](https://play.unity.com/mg/other/webgl-builds-397156)
## 플레이 방법
- 마우스 왼쪽 클릭 : 타일 탐색
- 마우스 오른쪽 클릭 : 지뢰 표시 및 표시 해제
- 키보드 R 키 : 게임 리셋

# 개발 노트

## 지뢰찾기

### 요약
2차원 격자 타일 배열에서 탐험되지 않은 땅을 선택하여 지뢰가 존재하지 않는 타일을 모두 선택하는것이 목적인 게임이다.

- 시작
	- 타일에 지뢰가 몰래 배치됩니다.
	- 버튼을 누른 지점과, 그 주변(상하좌우 대각선) 8방향의 블록은 빈공간이 확정되며, 만약 그 공간에 지뢰가 있었다면, 다른 곳으로 보내집니다.
- 중간
	- 플레이어는 탐험되지 않은 타일을 클릭합니다.
	- 타일의 타입에 따라 다릅니다
		- 타일이 폭탄인 경우
			- 게임이 오버가 됩니다
		- 타일이 폭탄이 아닌 경우
			- 만약 주변 8칸 타일에 폭탄이 있는 경우
				- 숫자를 표현합니다
			- 만약 주변 8칸 타일에 폭탄이 없는 경우
				- 주변 8칸을 자동으로 탐험합니다. 마치 플레이어가 그 타일을 클릭한 것과 같은것처럼 진행합니다. (재귀함수 호출)
			- 이후 게임 종료 판정하기
				- 만약 남는 안전 타일이 전부 탐색된 경우


### 아키텍쳐

#### 게임 씬
- class TileInfo : 타일 클래스
	- 목적 : 타일의 정보를 저장합니다.
	- 공개 정보
		- Enum 타입 {안전 / 폭탄}
		- Boolean 타입 : isDiscovered 이 타일은 드러났는가?
		- Boolean 타입 : isMarked 이 타일은 의심받는중인가?
		- GameObject : 해당 게임오브젝트는 무엇인가?
- 타일 커버 게임오브젝트
	- 목적 : 플레이어가 어떤 타일을 클릭했는지를 판정하기 위해 존재하는 콜라이더입니다.
	- 함수
		- 자신이 버튼이 눌렸으면 게임매니저에게 신호를 보내는 기능
			- 자신의 위치 정보를 보냄
- 숫자 아이콘 게임오브젝트
- 깃발 아이콘 게임오브젝트
- 폭탄 아이콘 게임오브젝트
	- 목적 : 해당 타일에 폭탄이 있다는것을 보여주기 위한 타일
- 미탐험 게임오브젝트
	- 목적 : 탐험해볼 수 있는 타일
- 숫자 타일 게임오브젝트
	- 목적 : 주변에 폭탄이 얼마나 준비되어 있는지를 알려줍니다.
		- 종류
			- 주변에 폭탄이 없을 때 : 빈 타일
			- 주변에 폭탄이 있을 때 : 숫자 타일
- 게임 매니저 컴포넌트
	- 목적 : 게임의 전반적인 연산을 진행합니다.
	- 정보
		- 퍼블릭
			- TileInfo[,] tiles타일의 정보
			- TileInfo[,] bombs : 폭탄의 목록
		- 프라이빗
			- isGameOver : 게임오버 상태인가?
			- isFirstExplore : 처음 블럭을 선택한 순간인가?
			- bombCount : 폭탄의 갯수
			- safeTileLeftCount : 남은 타일의 갯수
			- sizeX
			- sizeY
	- 함수
		- 퍼블릭
			- Init() 게임 준비 함수
				- 새로운 게임을 준비합니다.
				- TileInfo에 있었던 모든 게임오브젝트를 파괴합니다.
				- TileInfo를 초기화합니다.
					- 새로운 타일을 배치
					- 무작위 폭탄 배치
						- For 문을 돌려서 무작위한 위치에 배치합니다
						- 해당하는 Enum값 변경합니다.
						- 해당하는 TileInfo 객체를 bombs에 하나씩 집어넣습니다.
					- 게임오브젝트 인스턴스화하고, 해당 배열의 원소에 인스턴스화된 게임오브젝트 연결.
					- isDiscovered, isMarked는 false로.
				- SafeTileLeftCount 값은 타일의 수 - 폭탄의 수 입니다.
				- isGameOver를 false로 만듭니다.
			- SwichFlagStat(x, y) : 해당 타일 의심 상태 전환하기
				- 해당 타일이 isDiscovered이 true면 무시합니다.
				- isMarked값이
					- true
						- isMarked값을 true로 변경
						- M_PlaceBlock() 호출
					- false
						- isMarked값을 true로 변경
						- M_PlaceBlock() 호출
			- Explore(x, y) 특정 위치 타일 탐험하기
				- 게임오버 상태에서는 작동하지 않습니다.
				- isFirstExplore가 true인 경우에는 "MoveBombs(x, y)"를 실행합니다.
				- 해당 타일이 탐험된 타일이라면 무시합니다.
				- 해당 타일이 의심받는 타일이라면 무시합니다.
				- 해당 타일이 폭탄 타일이라면 M_TerminateGame()를 호출하고 게임을 종료합니다.
				- GetNearBombCount(x, y)를 호출하여 주변 타일의 정보를 탐색합니다.
				- 만약 해당 타일이 주변 폭탄이 없는경우
					- 예
						- For문을 통해 주변 타일을 대상으로 Explore를 호출합니다.
					- 아니요
						- 방금 호출한 GetNearBombCount 메서드의 리턴값에 따라, 해당하는 숫자에 맞는 타일을 배치합니다.
				- 해당 위치의 타일 정보의 isDiscovered 필드를 true로 변경합니다.
				- SafeTileLeftCount를 1만큼 줄입니다.
				- 만약 SafeTileLeftCount이 0이 된다면, M_GameWin()를 호출합니다.
			- (구현되지 않음)~~AutoExplore(x, y) 특정 위치 타일을 자동으로 탐험하기~~
				- ~~해당 타일이 isDiscovered이 false면 무시합니다.~~
				- ~~해당 위치 주변 8칸의 TileInfo을 수집합니다.~~
				- ~~주변 8칸의 폭탄 갯수와 의심받는 타일의 갯수가 동일하지 않으면 이 함수는 종료됩니다~~
				- ~~의심받지 않는 미탐험 타일에 대해 Explore(x, y)합니다.~~
			- GetNearBombCount(x, y) 인근 폭탄 갯수 요청 함수
				- M_GetNearTileList(x, y)를 호출합니다.
				- List에서 폭탄의 갯수를 세고 리턴합니다.
		- 프라이빗
			- M_TerminateGame() 게임 패배 표현
				- 폭탄이 있는 자리를 모두 드러냅니다.
				- isGameOver를 true로 지정합니다.
			- M_GameWin() 게임 승리 표현
				- 폭탄이 있는 자리를 모두 드러냅니다.
				- isGameOver를 true로 지정합니다.
			- M_MoveBombs(x, y) : 폭탄 옮기는 함수
				- 처음 클릭한 타일과 주변 8칸은 폭탄이 없도록 보장하는 함수
				- 다른 타일로 폭탄을 옮김
			- M_PlaceBlock(Blocktype) : 특정 위치 타일에 표시하기
				- 해당 위치에 있는 타일을 제거
				- 해당 위치에 Blocktype에 따라 타일을 배치함
			- M_GetNearTileList(x, y) : 해당 위치의 주변 타일의 TileInfo 객체를 담은 리스트를 리턴합니다
				- 만약 해당 위치가 모서리 등으로 8칸 전탐색이 어려운 경우, 바깥 영역의 타일은 무시합니다. 즉 접근할 수 있는 타일에만 허용합니다.
- 버튼 컴포넌트
	- 정보
		- 위치 값 (x, y)
	- 함수
		- 마우스 오른클릭
			- SwichFlagStat(x, y)를 호출합니다.
		- 마우스 왼클릭
			- Explore(x, y)를 호출합니다.
		- 마우스 중간클릭
			- ~~AutoExplore(x, y)를 호출합니다.~~
- 인풋 매니저 컴포넌트
	- 목적 : 플레이어의 클릭, 키보드 입력을 받아들이고, 이것을 적절한 함수에 매칭시킵니다.
	- 함수
		- 마우스 오른클릭
			- 목적 : 타일에 표시를 합니다.
			- 레이를 발사하여 판정합니다.
		- 마우스 왼클릭
			- 목적 : 타일을 탐험합니다.
			- 레이를 발사하여 판정합니다.
		- 마우스 중간클릭
			- 목적 : 타일을 자동으로 탐험합니다.
			- 레이를 발사하여 판정합니다.
		- 리셋 버튼 액션
			- Init()를 호출합니다.
- (구현되지 않음)~~이펙트) 구름 컴포넌트~~
	- ~~펑 터지는 연출을 보여준다.~~


